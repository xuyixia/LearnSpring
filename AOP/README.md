AOP 面向切面编程提供另一种角度思考程序结构。

小二上图

传统的面向对象编程，以类为单位从上之下运行。该程序结构下，类A的test方法和类B的test方法没有任何关联，在这种视角下，对于类A的test来说，类B的test和它的其它方法一样。

新潮的面向切面编程，以切面为关注点。在该程序结构下，没有类这个概念，有的只是切面。

# AOP的相关概念
AOP是Spring的一个组件，同时它自身是一个框架。这一点上它和Spring IOC一样。组件与组件间没有依赖性，可以自由选择组件的搭配。

连接点： 在程序执行过程中某个特定的点，比如某方法调用的时候或者 处理异常的时候。 在 Spring AOP 中，一个连接点 总是 代表一个方法的执行。 通过 声明一个 org.aspectj.lang.JoinPoint 类型的参数可以使通知（Advice）的主体 部分获得连接点信息。

切入点： 匹配连接点（Joinpoint）的断言。通知和一个切入点表达式 关联，并在满足这个切入点的连接点上运行（例如，当执行某个特定名称的方法时）。 切 入点表达式如何和连接点匹配是 AOP 的核心：Spring 缺省使用 AspectJ 切入点语法。 

横切：抽象动作

横切关注点：一些类的相同方法

切面： 一个关注点的模块化，这个关注点可能会横切多个对象。事务管理是 J2EE 应用中一个关于横切关注点的很好的例子。 在 Spring AOP 中，切面可以使用通 用类（基于模式的风格） 或者在普通类中以 @Aspect 注解（@AspectJ 风格）来实现。 

通知：在切面的某个特定的连接点（Joinpoint）上执行的动作。通知有 各种类型，其中包括“around”、“before”和“after”等通知。 通知的类型将在后 面部分进行讨论。许多 AOP 框架，包括 Spring，都是以拦截器做通知模型， 并维护一个以连接点为中心的拦截器链。 

织入： 把切面（aspect）连接到其它的应用程序类型或者对象上，并创建一个被通知（advised）的对象。 这些可以在编译时（例如使用 AspectJ 编译器），类加载时和运行时完成。 Spring和其他纯Java AOP框架一样，在运行时完成织入。 

# 通知的类型
1、 Before advice(前置通知)： 在某连接点（join point）之前执行的通知，但这个通知不能阻止连接点前的执行（除非它抛出一个异常）。 

2、After returning advice(返回后通知)： 在某连接点（join point）正常完成 后执行的通知：例如，一个方法没有抛出任何异常，正常返回。 

3、After throwing advice(抛出异常后通知)：在方法抛出异常退出时执行的通知。

4、After (finally) advice(后通知)： 当某连接点退出的时候执行的通知（不论是 正常返回还是异常退出）

5、Around Advice(环绕通知)： 包围一个连接点（join point）的通知，如方法调用。这是最强大的一种通知类型。 环绕通知可以在方法调用前后完成自定义的行为。它 也会选择是否继续执行连接点或直接返回它们自己的返回值或抛出异常来结束执行。  

> 环绕通知是最常用的一种通知类型。大部分基于拦截的 AOP 框架，例如 Nanning 和 JBoss4 ，都只提供环绕通知。 

# AOP 切面的定义
Spring2.0 提供两个切面定义方式
1. 基于模式（schema-based） (就是XML配置)
2. @AspectJ







## AOP术语

AOP作为一个单独的技术体系，它有自己的一套专业术语，遗憾的是术语在理解上不太直观。学好相关术语是理解和交流AOP的基础，因此一定要理解并牢记相关术语。  

**罗列AOP相关术语：**

* aspect(切面)
* advice(通知)
* pointcut(切点)
* join point(连接点)
* introduction(引入)
* （横切）
* 横切关注点
* 织入

切面是通知和切点的结合，切面的工作被称为通知。通知不仅描述了切面要完成的工作，也规定了工作执行的相对时间。  
通知可以在以下相对时间中执行：

* before(前置通知)
* after(后置通知)
* after-returning(返回通知)
* after-throwing(异常通知)
* around(环绕通知)

连接点是和切点在概念上容易混淆。  



  
  通知xxx



  















AOP不属于Java的范畴，甚至是独立于任何面向对象编程语言的。  
AOP（面向切面编程）  

基于AOP思想的框架有很多，具有代表性的如AspectJ、SpringAOP等。  
AspectJ是一门Java扩展语言，需要单独学习。SpringAOP是

想要理解AOP，需要先学习AOP的专业术语。  
首先是==关注点==，面向对象编程里，最理想的实践是对象的每一个方法只做一件事，我们把这种行为称为“关注一件事”，这件事就是“关注点”。然而实际情况下，一个方法往往需要同时做多件事，也就是同时存在多个关注点。我们把关注点进行分类，业务上的关注点称为“主关注点”，其它的称为“次要关注点”。